<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>

<script>

    /*const Observable = value => {
        const listener = [];
        return {
            onChange: callback => listener.push(callback),
            getValue: () => value,
            setValue: val => {
                if (value === val) return;
                value = val;
                listener.forEach(listener => listener(val));
            }
        }
    };


    const color = Observable('white');

    let updateCount = 0;
    document.writeln( color.getValue() === 'white');*/

    const Observable = value => {
        const listeners = [];
        return {
            onChange: callback => {
                listeners.push(callback);
                callback(value, value);
            },
            getValue: ()       => value,
            setValue: newValue => {
                if (value === newValue) return;
                const oldValue = value;
                value = newValue;
                listeners.forEach(callback => callback(value, oldValue));
            }
        }
    };

    let x_ = 1;
    let y_ = 2;
    let z_ = 3;

    let sum = 0;
    const trackable = Observable(0);

    trackable.onChange( val => sum += val );

    trackable.setValue(x_); // values x_, y_, z_ are given. Do not override.
    trackable.setValue(y_);
    trackable.setValue(z_);

    document.writeln(trackable.getValue() === z_ && sum === x_ + y_ + z_);

</script>

</body>
</html>
